<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Sign Up - Bus</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body { background: #f0f4f8; }
    .signup-shell { max-width: 520px; margin: 120px auto 40px; background: #fff; border-radius: 16px; padding: 28px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
    .title { font-size: 1.6rem; font-weight: 700; color: #1e40af; margin-bottom: 6px; }
    .subtitle { color: #64748b; margin-bottom: 18px; }
    .form-input { width: 100%; padding: 12px 16px; border-radius: 10px; border: 2px solid #cbd5e1; margin-bottom: 12px; font-size: 0.95rem; }
    .form-input:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
    .btn { padding: 12px 18px; border: none; border-radius: 10px; background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%); color: #fff; font-weight: 700; cursor: pointer; width: 100%; }
    .note { color: #64748b; font-size: 0.9rem; margin-top: 12px; }
    .msg { margin-bottom: 12px; border-radius: 10px; padding: 12px 14px; display:none; }
    .msg.error { background: #fee2e2; color: #991b1b; border-left: 4px solid #dc2626; display:flex; }
    .msg.success { background: #dbeafe; color: #1e40af; border-left: 4px solid #3b82f6; display:flex; }
    .back { display:block; text-align:center; margin-top:14px; color:#1e40af; text-decoration:none; }
  </style>
  <script>
    async function submitSignup(e) {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const msg = document.getElementById('msg');
      msg.style.display = 'none'; msg.textContent=''; msg.className='msg';
      try {
        const res = await fetch('http://localhost:3000/api/admin/signup-request', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, email, password })
        });
        const data = await res.json();
        if (!data.success) {
          msg.classList.add('error'); msg.textContent = data.message || 'Failed to submit request'; msg.style.display = 'block'; return;
        }
        msg.classList.add('success'); msg.textContent = data.message || 'Signup request submitted.'; msg.style.display = 'block';
        e.target.reset();
      } catch (err) {
        msg.classList.add('error'); msg.textContent = 'Network error'; msg.style.display = 'block';
      }
    }
  </script>
</head>
<body>
  <div class="signup-shell">
    <div class="title">Admin Sign Up</div>
    <div class="subtitle">Submit your details. The main admin will review and approve.</div>
    <div id="msg" class="msg"></div>
    <form onsubmit="submitSignup(event)">
      <input id="name" class="form-input" placeholder="Full Name" required>
      <input id="email" type="email" class="form-input" placeholder="Email" required>
      <input id="password" type="password" class="form-input" placeholder="Password" required>
      <button class="btn" type="submit">Request Access</button>
    </form>
    <a href="admin.html" class="back">Back to Admin Login</a>
    <div class="note">Note: Only the main admin (configured in .env) can approve requests.</div>
  </div>
</body>
</html>


